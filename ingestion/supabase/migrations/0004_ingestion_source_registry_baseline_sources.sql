-- Rekindle Content Pipeline
-- ING-022: Baseline source registry rows for active source portfolio
--
-- Notes:
--   1) Idempotent inserts ensure fresh resets include all baseline sources.
--   2) Existing source rows are not overwritten.

insert into public.ingest_source_registry (
  source_key,
  display_name,
  domains,
  content_type,
  state,
  owner_team,
  discovery_methods,
  seed_urls,
  strategy_order,
  quality_threshold,
  cadence,
  max_rps,
  max_concurrency,
  timeout_seconds,
  legal_risk_level,
  approved_for_prod,
  config_version,
  metadata_json
)
values
  (
    'rak',
    'Random Acts of Kindness',
    array['randomactsofkindness.org']::text[],
    'ideas',
    'active',
    'ingestion',
    array['index_page']::text[],
    array['https://www.randomactsofkindness.org/kindness-ideas']::text[],
    array['sitemap_html']::text[],
    0.5000,
    'FREQ=DAILY;BYHOUR=2;BYMINUTE=0',
    1.000,
    1,
    30,
    'low',
    true,
    '1',
    '{"runtime":{"retry_max_attempts":2,"retry_backoff_ms":750,"retry_backoff_multiplier":2}}'::jsonb
  ),
  (
    'ggia',
    'Greater Good In Action',
    array['ggia.berkeley.edu']::text[],
    'ideas',
    'active',
    'ingestion',
    array['index_page']::text[],
    array['https://ggia.berkeley.edu/practices']::text[],
    array['sitemap_html']::text[],
    0.5000,
    'FREQ=DAILY;BYHOUR=2;BYMINUTE=10',
    1.000,
    2,
    45,
    'low',
    true,
    '1',
    '{"runtime":{"retry_max_attempts":2,"retry_backoff_ms":750,"retry_backoff_multiplier":2}}'::jsonb
  ),
  (
    'dosomething',
    'DoSomething',
    array['dosomething.org','www.dosomething.org']::text[],
    'ideas',
    'active',
    'ingestion',
    array['index_page']::text[],
    array['https://www.dosomething.org/us/campaigns']::text[],
    array['sitemap_html']::text[],
    0.5000,
    'FREQ=DAILY;BYHOUR=2;BYMINUTE=20',
    1.000,
    2,
    45,
    'low',
    true,
    '1',
    '{"runtime":{"retry_max_attempts":2,"retry_backoff_ms":750,"retry_backoff_multiplier":2}}'::jsonb
  ),
  (
    'action_for_happiness',
    'Action for Happiness',
    array['actionforhappiness.org','www.actionforhappiness.org']::text[],
    'ideas',
    'active',
    'ingestion',
    array['index_page','feed']::text[],
    array['https://www.actionforhappiness.org/calendar']::text[],
    array['ics','sitemap_html']::text[],
    0.5000,
    'FREQ=DAILY;BYHOUR=2;BYMINUTE=30',
    1.000,
    2,
    45,
    'low',
    true,
    '1',
    '{"runtime":{"retry_max_attempts":2,"retry_backoff_ms":750,"retry_backoff_multiplier":2}}'::jsonb
  ),
  (
    'red_cross_pdf',
    'Red Cross (PDF)',
    array['redcross.org','www.redcross.org']::text[],
    'ideas',
    'active',
    'ingestion',
    array['index_page']::text[],
    array['https://www.redcross.org/get-help/how-to-prepare-for-emergencies.html']::text[],
    array['pdf']::text[],
    0.5000,
    'FREQ=WEEKLY;BYDAY=SUN;BYHOUR=2;BYMINUTE=40',
    0.500,
    1,
    60,
    'low',
    true,
    '1',
    '{"runtime":{"retry_max_attempts":2,"retry_backoff_ms":1000,"retry_backoff_multiplier":2}}'::jsonb
  )
on conflict (source_key) do nothing;
